<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Meneige boekhouding â€“ Login</title>

<!-- PWA -->
<link rel="manifest" href="/Boekhouding/manifest.json">
<meta name="theme-color" content="#2563eb">

<!-- Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
body{
  margin:0;
  font-family:'Segoe UI',sans-serif;
  background:linear-gradient(135deg,#dbeafe,#f0f9ff);
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
}
.loginBox{
  background:white;
  padding:30px;
  border-radius:16px;
  width:90%;
  max-width:380px;
  text-align:center;
  box-shadow:0 15px 40px rgba(0,0,0,.15);
}
.loginBox h1{
  margin-top:0;
  color:#1e3a8a;
}
.loginBtn{
  background:#2563eb;
  color:white;
  border:none;
  padding:14px;
  width:100%;
  border-radius:12px;
  font-size:16px;
  cursor:pointer;
}
.loginBtn i{
  margin-right:8px;
}
.status{
  margin-top:15px;
  font-size:14px;
  color:#64748b;
}
</style>
</head>

<body>

<div class="loginBox">
  <h1><i class="fas fa-wallet"></i><br>Meneige boekhouding</h1>
  <p>Beveiligde toegang</p>

  <button class="loginBtn" id="loginBtn">
    <i class="fab fa-google"></i> Inloggen met Google
  </button>

  <div class="status" id="status">Niet ingelogd</div>
</div>

<!-- FIREBASE LOGIN -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import {
  getAuth,
  GoogleAuthProvider,
  signInWithPopup,
  onAuthStateChanged
} from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyAkBAw17gNU_EBhn8dKgyY5qv-ecfWaG2s",
  authDomain: "finance-jonas.firebaseapp.com",
  projectId: "finance-jonas",
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const provider = new GoogleAuthProvider();

// ðŸ‘‡ EXTRA BEVEILIGING
const ALLOWED_EMAIL = "jonasweckhuysen@gmail.com";

loginBtn.onclick = async () => {
  try{
    await signInWithPopup(auth, provider);
  }catch(err){
    alert("Inloggen mislukt");
    console.error(err);
  }
};

onAuthStateChanged(auth, user => {
  if(user){
    if(user.email !== ALLOWED_EMAIL){
      alert("Geen toegang tot deze applicatie");
      auth.signOut();
      return;
    }

    status.innerText = "Ingelogd als: " + user.email;

    // â© DOORSTUREN
    setTimeout(()=>{
      window.location.href = "app.html";
    }, 800);
  }
});
</script>

</body>
</html>
